<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Home Loan Calculator — Donut Chart</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
  body{
    margin:0;background:#f4f7fb;font-family:Inter,system-ui,Arial;color:#0b1220;
    display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:20px;
  }
  .card{
    width:420px;background:#fff;border-radius:14px;padding:20px;
    box-shadow:0 12px 36px rgba(12,24,48,0.08);
  }
  h1{margin:0 0 12px;font-size:20px;text-align:center}
  label{display:block;font-weight:700;color:#374151;font-size:13px;margin:8px 0 4px}
  .input{width:100%;padding:10px;border-radius:10px;border:1px solid #e6e8eb;font-size:14px}
  .row{display:flex;gap:10px}
  .btn{
    width:100%;margin-top:14px;padding:12px;border-radius:12px;border:0;cursor:pointer;
    color:#fff;font-weight:800;font-size:15px;
    background:linear-gradient(135deg,#3b82f6,#8b5cf6 50%);
    box-shadow:0 8px 20px rgba(59,130,246,0.14);
  }
  .results{margin-top:14px;text-align:center;font-weight:700;font-size:14px}
  .donutWrap{position:relative;width:280px;height:280px;margin:20px auto}
  canvas{width:100% !important;height:100% !important}
  .centerText{
    position:absolute;left:0;top:0;width:100%;height:100%;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    pointer-events:none;
  }
  .centerText .percent{font-size:28px;font-weight:800;color:#14908b}
  .centerText .label{font-size:13px;color:#6b7280;margin-top:4px}
</style>
</head>
<body>
  <div class="card">
    <h1>Home Loan Calculator</h1>

    <label>Loan Amount (₹)</label>
    <input id="amount" class="input" type="number" value="500000">

    <div class="row">
      <div style="flex:1">
        <label>Annual Interest Rate (%)</label>
        <input id="rate" class="input" type="number" value="7.5">
      </div>
      <div style="width:100px">
        <label>Tenure (yrs)</label>
        <input id="years" class="input" type="number" value="20">
      </div>
    </div>

    <button id="calc" class="btn">Calculate</button>

    <div class="donutWrap">
      <canvas id="donut"></canvas>
      <div class="centerText">
        <div class="percent" id="centerPercent">0%</div>
        <div class="label">interest / principal</div>
      </div>
    </div>

    <div class="results">
      <div id="emi">Monthly EMI: —</div>
      <div id="totInterest">Total Interest: —</div>
      <div id="totPayment">Total Payment: —</div>
    </div>
  </div>

<script>
function toINR(n){return '₹' + Number(n).toLocaleString('en-IN',{minimumFractionDigits:2,maximumFractionDigits:2});}

// Chart.js donut
const ctx=document.getElementById('donut').getContext('2d');
const donut=new Chart(ctx,{
  type:'doughnut',
  data:{labels:['Principal','Interest'],
    datasets:[{data:[1,0],backgroundColor:['#d0d0d0','#000'],
      borderWidth:0,cutout:'65%',hoverOffset:6}]
  },
  options:{
    plugins:{
      legend:{display:false},
      tooltip:{callbacks:{
        label:function(ctx){return ctx.label+': '+toINR(ctx.raw);}
      }}
    }
  }
});

const centerPercent=document.getElementById('centerPercent');
const emiEl=document.getElementById('emi');
const totIntEl=document.getElementById('totInterest');
const totPayEl=document.getElementById('totPayment');

function computeEMI(P,annualRate,nMonths){
  const r=(annualRate/100)/12;
  if(r===0) return P/nMonths;
  const x=Math.pow(1+r,nMonths);
  return P*r*x/(x-1);
}

function calculate(){
  const P=+document.getElementById('amount').value;
  const r=+document.getElementById('rate').value;
  const y=+document.getElementById('years').value;
  const n=y*12;
  if(P<=0||r<0||n<=0){alert('Enter valid inputs');return;}

  const emi=computeEMI(P,r,n);
  const totalPayment=emi*n;
  const interest=totalPayment-P;

  // update chart
  donut.data.datasets[0].data=[P,interest];
  donut.update();

  // update center % text
  const pct=((interest/P)*100).toFixed(1);
  centerPercent.textContent=pct+'%';

  // update results
  emiEl.textContent='Monthly EMI: '+toINR(emi.toFixed(2));
  totIntEl.textContent='Total Interest: '+toINR(interest.toFixed(2));
  totPayEl.textContent='Total Payment: '+toINR(totalPayment.toFixed(2));
}

document.getElementById('calc').addEventListener('click',calculate);
calculate(); // default
</script>
</body>
</html>
